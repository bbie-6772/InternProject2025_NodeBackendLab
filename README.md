# í˜ë‚´ë¼ğŸ’ª í´ë¦­ ëŒ€íšŒ

- http / tcp í†µì‹ ì„ ì´ìš©í•´ í´ë¦­ ëŒ€íšŒë¥¼ êµ¬í˜„í•œ í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤.

- HHì‹œ 00ë¶„ ë¶€í„° 1ë¶„ ê°„ ê°€ì¥ ë§ì´ í´ë¦­í•œ ì‚¬ìš©ìë¥¼ ì°¾ì•„ë‚´ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

## ì°¸ì—¬ ê·œì¹™

1. **1ë¶„**ì€ *00ì´ˆ*ë¶€í„° *59.999999ì´ˆ*ë¥¼ ì˜ë¯¸í•˜ë©°, **ì‹œê°„ ë²”ìœ„**ì— **ë“¤ì–´ì˜¤ì§€ ì•Šì€ í´ë¦­ì€ ì„¸ì§€ ë§ì•„ì•¼í•©**ë‹ˆë‹¤.

2. ì–´ë– í•œ ì—°ì†ëœ **1ì´ˆ êµ¬ê°„ ë‚´**ì— **í´ë¦­ íšŸìˆ˜ê°€ 4íšŒë¥¼ ì´ˆê³¼**í•˜ë©´ **ì‹¤ê²© ì²˜ë¦¬**ë©ë‹ˆë‹¤.  
( ì´ˆë‹¹ 4íšŒë¥¼ ì´ˆê³¼ ì‹œ, ë¶€ì •í–‰ìœ„ìë¡œ ê°„ì£¼í•˜ê³  ëˆ„ì  í´ë¦­ëŸ‰ì— ê´€ê³„ ì—†ì´ ì‹¤ê²© ì²˜ë¦¬ )

3. **íšŒì›ê°€ì…**í•˜ì§€ **ì•Šì€ ìœ ì €ëŠ” ì°¸ì—¬ í•  ìˆ˜ ì—†ìŠµ**ë‹ˆë‹¤.

4. ì²« í´ë¦­ì€ ì°¸ì—¬ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.

5. ì°¸ì—¬í•œ ìœ ì €ê°€ **10ì´ˆê°„ í´ë¦­í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìë™ ì‹¤ê²© ì²˜ë¦¬**ë©ë‹ˆë‹¤. ì¦‰, ì´í›„ì˜ ìš”ì²­ì„ ì„¸ì§€ ë§ì•„ì•¼í•©ë‹ˆë‹¤.

6. ê°ì¢… ì‚¬ìœ ë¡œ **ì‹¤ê²©í•œ ì°¸ì—¬ìëŠ” ì¬ì°¸ì—¬ í•  ìˆ˜ ì—†ìŠµ**ë‹ˆë‹¤.

7. í´ë¦­ ìˆ˜ê°€ ë™ì¼í•œ ì„ ë‘ê°€ ìƒê¸¸ ê²½ìš°, 1 ë§ˆì´í¬ë¡œì´ˆë¼ë„ **ë¹ ë¥´ê²Œ í´ë¦­ìˆ˜ì— ë„ë‹¬í•œ ìœ ì €ê°€ ìš°ìŠ¹ì**ê°€ ë©ë‹ˆë‹¤.

## ìš”êµ¬ ì‚¬í•­

- í´ë¦­ ìš”ì²­ì€ TCP í†µì‹ ì„, íšŒì›ê°€ì…ì€ HTTP ì„œë²„ë¡œ êµ¬í˜„

- ì´ë²¤íŠ¸ ì¢…ë£Œ í›„, ìš°ìŠ¹ìì˜ ì•„ì´ë”” / ì£¼ì†Œì§€ / í´ë¦­ íšŸìˆ˜ ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆì–´ì•¼ í•¨

- e2e(End To End) í…ŒìŠ¤íŠ¸ ë° ìœ ë‹› í…ŒìŠ¤íŠ¸ êµ¬í˜„

- í´ëŸ¬ìŠ¤í„° ëª¨ë“œë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ê³„

- ì–´ë– í•œ ì™¸ë¶€ ì†ŒìŠ¤ ì—†ì´ êµ¬í˜„

## ì‹¤í–‰ ë°©ë²•

### í´ëŸ¬ìŠ¤í„° ëª¨ë“œ

1. Repositoryë¥¼ ë³µì œí•˜ì—¬ IDEë¡œ í´ë”ë¥¼ ì—°ë‹¤.

2. eventServer/session.js íŒŒì¼ë¡œ ë“¤ì–´ê°€ ì‹œê°„ ì„¤ì •ì„ í•´ì¤€ë‹¤.

    ```jsx
    // ì´ë²¤íŠ¸ ì‹œì‘ ì‹œê°„ hour(0~23):minute(0~59)
    const hour = 6;
    const minute = 58;
    ```

3. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì— ì…ë ¥í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ëª¨ë“œë¡œ ì‹¤í–‰í•´ì¤€ë‹¤.

    ```bash
    node common/clustering/cluster.js
    ```

4. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì¶”ê°€ í„°ë¯¸ë„ì— ì…ë ¥í•˜ì—¬ ë”ë¯¸ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‹¤í–‰í•´ì¤€ë‹¤.

    ```bash
    node tests/e2e/client.spec.js
    ```

5. ì„¤ì •ëœ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ 1ë¶„ ì´í›„ ìš°ìŠ¹ì ê²°ê³¼ê°€ cluster í„°ë¯¸ë„ í™”ë©´ì— í™•ì¸ëœë‹¤!  
( í˜„ì¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ ì˜¤ë¥˜ê°€ ë‚˜ëŠ” ë¶€ë¶„ì´ ìˆì–´ ì£¼ì„ì²˜ë¦¬ í•´ë‘ì—ˆìŠµë‹ˆë‹¤ )

```jsx
// eventServer/classes/session/userSession.class.js 
this.timer = setTimeout( async ()=> {
    this.isOpen = true;
    // console.log("ì‹œì‘");
    await new Promise((resolve) => setTimeout(() => resolve(), 60000));
    this.isOpen = false;
    // console.log("ë");
    await this.countUpload();

    // ê²°ê³¼ í™•ì¸ìš© ( ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹œ ì˜¤ë¥˜ ë°œìƒìœ¼ë¡œ ì£¼ì„ì²˜ë¦¬ )
    //setTimeout(async () => console.log(await this.getWinner()), 5000);
}, delay)
```

![Image](https://github.com/user-attachments/assets/9433b265-a5fa-4c29-acc7-8352f19369db)

### ì¼ë°˜ ëª¨ë“œ

1. Repositoryë¥¼ ë³µì œí•˜ì—¬ IDEë¡œ í´ë”ë¥¼ ì—°ë‹¤.

2. eventServer/session.js íŒŒì¼ë¡œ ë“¤ì–´ê°€ ì‹œê°„ ì„¤ì •ì„ í•´ì¤€ë‹¤.

    ```jsx
    // ì´ë²¤íŠ¸ ì‹œì‘ ì‹œê°„ hour(0~23):minute(0~59)
    const hour = 6;
    const minute = 58;
    ```

3. í„°ë¯¸ë„ì„ 2ê°œë¥¼ ì‹¤í–‰í•˜ì—¬ ê°ê° ì•„ë˜ì˜ ëª…ë ¹ì–´ë“¤ì„ ì…ë ¥í•´ì¤€ë‹¤

    ```bash
    # TCP ì„œë²„ 
    node eventServer/server.js

    # HTTP ì„œë²„
    node registerServer/server.js
    ```

4. ë”ë¯¸ í´ë¼ì´ì–¸íŠ¸ íŒŒì¼ì„ ì—°ë‹¤ tests/e2e/client.spec.js

5. ë§¨ ì•„ë˜ì— ìˆëŠ” ì‹¤í–‰ë¬¸ì—ì„œ ì£¼ì„ì²˜ë¦¬ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•´ì¤€ë‹¤

    ```jsx
    // ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ë¬¸
    for (let i = 0; i < 5; i++) {
        // ì¼ë°˜ í…ŒìŠ¤íŠ¸
        await defaultTest(5, i);
        // í´ëŸ¬ìŠ¤í„° í…ŒìŠ¤íŠ¸
        //await clusterTest(5, i);
        await new Promise((resolve) => setTimeout(() => resolve(), 1000));
    }
    ```

6. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì¶”ê°€ í„°ë¯¸ë„ì— ì…ë ¥í•˜ì—¬ ë”ë¯¸ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‹¤í–‰í•´ì¤€ë‹¤.

    ```bash
    node tests/e2e/client.spec.js
    ```

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

- tests/unit í´ë”ì— ìˆëŠ” ê°ê°ì˜ íŒŒì¼ë“¤ì„ ë‹¨ì¼ë¡œ ì‹¤í–‰ì‹œì¼œ ì¤€ë‹¤.

    ```bash
    # ì˜ˆì‹œ
    node tests/unit/controllers/event.onData.spec.js
    ```

### API ëª…ì„¸ì„œ

![Image](https://github.com/user-attachments/assets/dc5875f7-d62b-4616-9cde-8f97d218fb9d)

### ERD

![Image](https://github.com/user-attachments/assets/0bc26c7c-89da-4ffa-a3ab-402861564910)

### íŒ¨í‚· ëª…ì„¸ì„œ

![Image](https://github.com/user-attachments/assets/9dcc74ae-7def-4891-9073-f79fe56c754b)
